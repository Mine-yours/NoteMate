# NoteMate

NoteMate は講義資料の PDF をアップロードして閲覧し、Google Gemini を用いた専門用語の自動抽出・解説を提供する学習支援ツールです。Flask ベースのシンプルな Web アプリとして構築されており、ローカル環境で手軽に動かせます。

## 特長
- PDF をブラウザ上で即座に閲覧可能
- 資料単位でのダウンロード・削除機能
- Google Gemini API を用いた専門用語の抽出と解説（ページ単位の指定にも対応）
- SQLite を利用した軽量なファイル管理
- ブラウザの `localStorage` による生成結果のキャッシュ

## セットアップ
### 事前準備
- Python 3.10 以上
- Google Gemini API キー（専門用語生成機能を利用する場合）

### 手順
1. 仮想環境を用意します（推奨）。
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   ```
2. 依存パッケージをインストールします。
   ```bash
   pip install Flask google-generativeai PyPDF2
   ```
3. 必要な環境変数を設定します。開発中は `.env` などを利用しても構いません。
   ```bash
   export GOOGLE_API_KEY="あなたのAPIキー"
   export GEMINI_MODEL="models/gemini-2.0-flash"  # 任意。未設定時はこの値が既定値
   export SECRET_KEY="任意のシークレットキー"     # 未設定時は開発用のデフォルト値を利用
   ```

## 実行方法
Flask の開発サーバーを起動します。
```bash
flask --app app run --debug
```
起動後、`http://127.0.0.1:5000/` にアクセスしてアプリを利用できます。初回アクセス時に `database.db`（SQLite）が自動生成されます。

## 使い方
1. トップページで PDF をアップロードします（対応形式は `.pdf` のみ）。
2. アップロード済みの資料一覧から「開く」をクリックすると閲覧ページが表示されます。
3. 閲覧ページの「専門用語を生成」ボタンを押すと、Gemini API が資料から重要語句を抽出し解説を提示します。ページを指定して生成することも可能です。
4. 生成された用語リストはブラウザに保存され、ページ切り替えや再描画時にも再利用されます。
5. 不要になった資料は一覧から削除できます（ファイルおよび DB レコードが消去されます）。

## ディレクトリ構成
```text
app/
 ├─ __init__.py          Flask アプリ本体と初期化処理
 ├─ db.py                SQLite とのやり取り（資料メタ情報の永続化）
 ├─ main.py              ルーティングと機能の中核ロジック
 ├─ static/              CSS、画像、アップロードファイル
 └─ templates/           HTML テンプレート
database.db               SQLite データベース（起動時に生成）
```

## 補足
- Google Gemini API を利用できない環境では、専門用語生成機能はエラー応答となります。
- PyPDF2 がインストールされていない場合は PDF の解析が行えません。インストールを忘れずに行ってください。
- 本番利用を想定する場合は、ファイルサイズ上限の設定や認証・認可の導入を検討してください。